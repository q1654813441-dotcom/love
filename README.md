# 💕 微信定时消息推送系统

一个温馨的微信定时消息推送系统，每天定时给你的女朋友发送包含课程安排、恋爱天数、大姨妈提醒、天气信息和星座运势的贴心消息。

## ✨ 功能特点

- 📚 **智能课程提醒**: 根据真实课表按周次显示课程，包含具体时间和教室
- 💕 **恋爱纪念**: 计算并提醒你们在一起的天数
- 🩸 **大姨妈提醒**: 智能预测和提醒月经周期
- 🌤️ **天气信息**: 实时天气查询和穿衣建议
- ⭐ **星座运势**: 每日星座运势和幸运提示
- ⏰ **定时推送**: 可自定义推送时间
- 📅 **周次查询**: 可以查看任意周次的课程安排
- 🎨 **美观界面**: 支持微信模板消息格式

## 🚀 快速开始

### 方式一：GitHub Actions自动部署（推荐）

1. **Fork本仓库到你的GitHub**

2. **配置GitHub Secrets**：
   - 详细配置说明请参考：[GITHUB_SECRETS.md](GITHUB_SECRETS.md)
   - 在仓库 `Settings` → `Secrets and variables` → `Actions` 中添加所有必需的环境变量

3. **自动运行**：
   - 每天北京时间8点自动发送消息
   - 也可以在 `Actions` 页面手动触发

4. **查看日志**：
   - 在 `Actions` 页面查看运行状态和日志

### 方式二：本地运行

1. **安装依赖**：
   ```bash
   pip install -r requirements.txt
   ```

2. **配置参数**：
   - 复制 `config_backend.py` 为 `config.py`
   - 填入你的配置信息（微信测试号、天气API等）

3. **运行程序**：
   ```bash
   python main.py
   ```

### 方式三：宝塔面板部署

1. **上传项目**：将项目文件夹上传到宝塔面板的 `/www/wwwroot/` 目录

2. **安装Python环境**：在宝塔面板软件商店安装 Python 3.8+

3. **运行部署脚本**：
   ```bash
   bash deploy.sh
   ```

4. **配置参数**：编辑 `config.py` 文件，填入你的配置信息

5. **启动服务**：
   ```bash
   python start.py
   ```

6. **设置定时任务**：在宝塔面板的计划任务中设置定时执行

详细部署说明请参考：`宝塔部署说明.md`

## 📖 使用说明

### 主菜单功能

1. **立即发送测试消息**: 测试消息发送功能
2. **启动定时任务**: 启动定时推送（默认每天8点）
3. **查看今日课程**: 查看今天的课程安排
4. **查看恋爱天数**: 查看你们在一起的天数
5. **查看大姨妈信息**: 查看月经周期相关信息
6. **查看天气信息**: 查看当前天气
7. **查看星座运势**: 查看今日星座运势

### 自定义配置

#### 修改课程表

课程表已经根据你提供的真实课表进行了配置，包含：

- **学期时间**: 2025年9月1日开始，共20周
- **课程安排**: 按周次和星期几精确配置
- **时间信息**: 包含具体上课时间和教室
- **周次管理**: 自动计算当前周次，按周次显示课程

课程表配置在 `schedule_manager.py` 中的 `course_schedule` 字典，包含：
- 周一：二维动画设计 (9-16周)
- 周二：动画原理课程设计 (17周)
- 周三：大学生创新创业基础、影视剧作、摄影摄像
- 周四：数字图像处理、场景设计
- 周五：形势与政策、影视剧作、摄影摄像、体育3、马克思主义基本原理

#### 修改推送时间

编辑 `config.py` 中的 `PUSH_TIME`：

```python
PUSH_TIME = "08:00"  # 修改为你想要的时间
```

#### 修改恋爱纪念日

编辑 `config.py` 中的 `LOVE_START_DATE`：

```python
LOVE_START_DATE = datetime(2023, 1, 1)  # 修改为你们的开始日期
```

## 📁 项目结构

```
定时消息py/
├── main.py                 # 主程序入口
├── config.py              # 配置文件
├── requirements.txt       # 依赖包列表
├── env_example.txt        # 环境变量示例
├── README.md             # 项目说明
├── wechat_api.py         # 微信API接口
├── schedule_manager.py   # 课程表管理
├── love_calculator.py    # 恋爱天数计算
├── period_tracker.py     # 大姨妈提醒
├── weather_api.py        # 天气查询
├── constellation_api.py  # 星座运势
└── message_scheduler.py  # 消息调度
```

## 🔧 高级配置

### 自定义消息模板

你可以修改 `wechat_api.py` 中的 `send_daily_message` 方法来自定义消息格式。

### 添加新的功能模块

1. 创建新的功能模块文件
2. 在 `message_scheduler.py` 中导入并使用
3. 在 `generate_daily_message` 方法中添加新功能

### 错误处理

程序包含完善的错误处理机制：
- 网络请求失败时使用备用数据
- API调用失败时提供默认信息
- 配置文件缺失时给出提示

## 🐛 常见问题

### Q: 微信消息发送失败怎么办？

A: 检查以下几点：
1. 确认 `appID` 和 `appsecret` 正确
2. 确认模板ID正确
3. 确认用户openid正确
4. 检查网络连接

### Q: 天气信息获取失败？

A: 检查天气API密钥是否正确，或者程序会使用备用信息。

### Q: 如何修改推送时间？

A: 修改 `config.py` 中的 `PUSH_TIME` 变量。

### Q: 如何添加新的课程？

A: 修改 `config.py` 中的 `SCHEDULE` 字典。

## 📝 更新日志

- v1.0.0: 初始版本，包含基础功能

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 💝 致谢

感谢所有开源项目的支持！

---

💕 愿你们的爱情长长久久！
